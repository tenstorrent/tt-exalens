name: "LINTING"

run-name:  Lint DEBUDA by @${{ github.actor }} triggered by ${{ github.event_name }} event (${{ github.ref_name }})

on:
  workflow_call:
  push:
    

jobs:
  check-spdx-licenses:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5.0.0
        with:
          cache: 'pip'
          cache-dependency-path: infra/requirements-infra.txt
      - name: Install infra deps
        run: python -m pip install -r infra/requirements-infra.txt
      - name: Check SPDX licenses
        run: python -m check_copyright --dry-run --config infra/copyright-config.yaml .
  # lint-cpp-files:
  #   runs-on: "ubuntu-22.04"
  #   name: "Lint cpp files"
  #   steps:
  #     - uses: actions/checkout@v4
  #       with:
  #         submodules: recursive
  #         lfs: false
  #     - name: Install dependencies
  #       run: |
  #         sudo apt update
  #         sudo apt -y install clang-format
  #     - run: |
  #         scripts/clang-format-repo.sh
  #         git diff --exit-code
  #     - uses: actions/upload-artifact@v4
  #       with:
  #         name: clang-format-results
  #         path: report-cpp-lint.xml